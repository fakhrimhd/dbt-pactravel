version: 2

models:
  - name: dim_customers
    description: "Dimension table for customer information"
    columns:
      - name: sk_customer_id
        description: "Surrogate key for customer dimension"
        tests:
          - not_null
          - unique
      - name: nk_customer_id
        description: "Natural key from source system"
        tests:
          - not_null
      - name: customer_first_name
        tests:
          - not_null
      - name: customer_family_name
        tests:
          - not_null

  - name: dim_airlines
    description: "Dimension table for airline information"
    columns:
      - name: sk_airline_id
        tests:
          - not_null
          - unique
      - name: nk_airline_id
        tests:
          - not_null
      - name: airline_name
        tests:
          - not_null

  - name: dim_aircrafts
    description: "Dimension table for aircraft information"
    columns:
      - name: sk_aircraft_id
        tests:
          - not_null
          - unique
      - name: nk_aircraft_id
        tests:
          - not_null

  - name: dim_airports
    description: "Dimension table for airport information"
    columns:
      - name: sk_airport_id
        tests:
          - not_null
          - unique
      - name: nk_airport_id
        tests:
          - not_null
      - name: latitude
        tests:
          - not_null
      - name: longitude
        tests:
          - not_null

  - name: dim_hotels
    description: "Dimension table for hotel information"
    columns:
      - name: sk_hotel_id
        tests:
          - not_null
          - unique
      - name: nk_hotel_id
        tests:
          - not_null

  - name: dim_date
    description: "Date dimension table for analytics"
    columns:
      - name: date_id
        description: "Primary key for date dimension"
        tests:
          - not_null
          - unique
      - name: date_actual
        tests:
          - not_null
          - unique

  - name: dim_time
    description: "Time dimension table for analytics"
    columns:
      - name: time_id
        tests:
          - not_null
          - unique
      - name: time_actual
        tests:
          - not_null
          - unique
      - name: day_night
        tests:
          - accepted_values:
              values: ['Day', 'Night']

  - name: fct_flight_bookings
    description: "Fact table for flight bookings"
    columns:
      - name: sk_flight_booking_id
        tests:
          - not_null
          - unique
      - name: sk_customer_id
        tests:
          - not_null
          - relationships:
              to: ref('dim_customers')
              field: sk_customer_id
      - name: sk_airline_id
        tests:
          - not_null
          - relationships:
              to: ref('dim_airlines')
              field: sk_airline_id
      - name: sk_aircraft_id
        tests:
          - relationships:
              to: ref('dim_aircrafts')
              field: sk_aircraft_id
      - name: sk_airport_src_id
        tests:
          - not_null
          - relationships:
              to: ref('dim_airports')
              field: sk_airport_id
      - name: sk_airport_dst_id
        tests:
          - not_null
          - relationships:
              to: ref('dim_airports')
              field: sk_airport_id
      - name: price
        tests:
          - not_null
      - name: date_id
        tests:
          - not_null
          - relationships:
              to: ref('dim_date')
              field: date_id
      - name: time_id
        tests:
          - relationships:
              to: ref('dim_time')
              field: time_id

  - name: fct_hotel_bookings
    description: "Fact table for hotel bookings"
    columns:
      - name: sk_hotel_booking_id
        tests:
          - not_null
          - unique
      - name: sk_customer_id
        tests:
          - not_null
          - relationships:
              to: ref('dim_customers')
              field: sk_customer_id
      - name: sk_hotel_id
        tests:
          - not_null
          - relationships:
              to: ref('dim_hotels')
              field: sk_hotel_id
      - name: check_in_date_id
        tests:
          - not_null
          - relationships:
              to: ref('dim_date')
              field: date_id
      - name: check_out_date_id
        tests:
          - relationships:
              to: ref('dim_date')
              field: date_id
      - name: duration_nights
        tests:
          - not_null
      - name: price
        tests:
          - not_null